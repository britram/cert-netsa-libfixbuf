
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>fixbuf- Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <link rel="stylesheet" type="text/css" href="../../site/style.css" />
        <link rel="stylesheet" type="text/css" href="doxygen.css">
        <link rel="stylesheet" type="text/css" href="tabs.css">
</head>
<body>
    <div id="p-body">
      <div id="l-header">
        <img src="../../site/sei-logo.png" id="l-sei-logo"
            alt="Software Engineering Institute | Carnegie Mellon&copy;" />
        <div id="l-netsa-logo"><a id="l-netsa-name" href="../../index.html"><b>CERT NetSA Security Suite</b></a></div>
        <div id="l-netsa-motto">Monitoring for Large-Scale Networks</div>
        <h1 class="l-page-title">fixbuf</h1>
        <span id="l-subtitle">Documentation</span>
      </div><!-- l-header -->
      <div id="l-content">
        <div id="l-sidebar">
          <div class="p-sidebar-section">
            <h1><a href="../index.html">fixbuf</a></h1>
            <ul>
              <li><a href="index.html">Documentation</a></li>
              <li><a href="../download.html">Downloads</a></li>
	      <li><a href="../../pyfixbuf/index.html">pyfixbuf</a></li>
            </ul>
          </div><!-- p-sidebar-section -->
        </div><!-- l-sidebar -->
      <div id="top"> <!-- need this for doxygen -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">IPFIX File Collectors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How-To Read IPFIX Files:</p>
<p>Using fixbuf to read from IPFIX Files as a Collecting Process is very much like the Export case. Create an fbInfoModel_t using <a class="el" href="public_8h.html#a390f707c7decf65060f31c0dba6c2a97" title="Allocate a new information model. ">fbInfoModelAlloc()</a> and any additional, vendor-specific information elements using <a class="el" href="public_8h.html#ae06a524366afa6827d7e5abb1c33c0d0" title="Add a single information element to an information model. ">fbInfoModelAddElement()</a>, <a class="el" href="public_8h.html#a202bfa2340263229893a38de18670179" title="Add multiple information elements in an array to an information model. ">fbInfoModelAddElementArray()</a>, <a class="el" href="public_8h.html#aad00d1ffb4ef338bba8ac31e0c109f51" title="Add information specified in the given XML file to the information model. ">fbInfoModelReadXMLFile()</a>, or <a class="el" href="public_8h.html#a3d3efcc1c075736f9c0c0425cf0aa8c2" title="Add information specified in the given XML data to the information model. ">fbInfoModelReadXMLData()</a>. Next create an fbSession_t using <a class="el" href="public_8h.html#ace1d8a4523d098e625d5330e0d15bd4b" title="Allocate a transport session state container. ">fbSessionAlloc()</a> and add internal templates via <a class="el" href="public_8h.html#a2e4baf6d2142eca4cb526b1e80628bf8" title="Add a template to a session. ">fbSessionAddTemplate()</a>. External templates do not need to be added for collection, as they will be loaded from templates in the file.</p>
<p>Then create an fbCollector_t to encapsulate the file, using the <a class="el" href="public_8h.html#a9891f65a4f6d838152b92c7afe97cc8d" title="Allocate a collecting process endpoint for an open file. ">fbCollectorAllocFP()</a> or <a class="el" href="public_8h.html#a7549b8dcc9e44f02187708cfb36d14bc" title="Allocate a collecting process endpoint for a named file. ">fbCollectorAllocFile()</a> calls.</p>
<p>With an fbSession_t and an fbCollector_t available, create a buffer for writing via <a class="el" href="public_8h.html#a71b2a64c7d212e9c3562388b95b993ab" title="Allocate a new buffer for collection. ">fBufAllocForCollection()</a>. Set the internal template ID with <a class="el" href="public_8h.html#a28c6c56234351a793fd513b212bd31b8" title="Set the internal template on a buffer to the given template ID. ">fBufSetInternalTemplate()</a>, and use <a class="el" href="public_8h.html#a11c40f1d55e2d4b29b40eb4c07ce5ee7" title="Retrieve a record from a buffer. ">fBufNext()</a> to read records from IPFIX Messages and Messages from the input stream.</p>
<p>By default, <a class="el" href="public_8h.html#a11c40f1d55e2d4b29b40eb4c07ce5ee7" title="Retrieve a record from a buffer. ">fBufNext()</a> will consume an IPFIX Message from the input stream when the end of the message buffer is reached on read. The <a class="el" href="public_8h.html#a661f4cc21e726345d3e22372af33c2d1" title="Set the automatic mode flag on a buffer. ">fBufSetAutomaticMode()</a> call can be used to modify this behavior, causing <a class="el" href="public_8h.html#a11c40f1d55e2d4b29b40eb4c07ce5ee7" title="Retrieve a record from a buffer. ">fBufNext()</a> to return FB_ERROR_EOM when at end of message. Use this if your application requires manual control of message collection. In this case, <a class="el" href="public_8h.html#a7c89ee8cc9d536e1ceafb371513a6479" title="Read a new message into a buffer using the associated collecting process endpoint. ">fBufNextMessage()</a> will consume a Message from the input stream. </p>
</div></div><!-- contents -->
      </div><!-- l-content -->
      <div id="l-footer">&copy; 2006-2018 Carnegie Mellon University</div>
    </div><!-- p-body -->
</body>
</html>
